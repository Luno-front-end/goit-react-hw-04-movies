{"version":3,"sources":["components/views/MovieDetailsPage.js"],"names":["Cast","lazy","Reviews","MovieCard","moviesId","useParams","useState","movie","setMovie","setError","loader","setLoader","history","useHistory","location","useLocation","useEffect","Api","fetchApiOneMovie","then","catch","error","finally","a","className","src","poster_path","alt","width","height","type","onClick","push","state","from","title","vote_average","Math","round","genres","map","id","name","overview","to","fallback","path","casts"],"mappings":"gPAeMA,EAAOC,gBAAK,kBAAM,gCAClBC,EAAUD,gBAAK,kBAAM,gCAEZ,SAASE,IAAa,IAC3BC,EAAaC,cAAbD,SAD0B,EAGRE,mBAAS,MAHD,mBAG3BC,EAH2B,KAGpBC,EAHoB,OAIRF,mBAAS,MAJD,mBAIpBG,GAJoB,aAKNH,oBAAS,GALH,mBAK3BI,EAL2B,KAKnBC,EALmB,KAO5BC,EAAUC,cACVC,EAAWC,cAGjBC,qBAAU,WACRL,GAAU,GACVM,IAAIC,iBAAiBd,GAClBe,KAAKX,GACLY,OAAM,SAACC,GAAD,OAAWZ,EAASY,MAC1BC,SAAQ,kBAAMX,GAAU,QAC1B,CAACP,IACJ,IAAqBmB,EAOrB,OACE,sBAAKC,UAAU,sBAAf,UACGd,GAAU,cAAC,IAAD,IACX,qBACEe,IAAKlB,GAAK,yCAAsCA,EAAMmB,aACtDC,IAAI,GACJC,MAAM,MACNC,OAAO,MACPL,UAAU,gBAEZ,gCACE,wBAAQM,KAAK,SAASC,QAdT,WAAO,IAAD,IACvBnB,EAAQoB,KAAR,iBAAalB,QAAb,IAAaA,GAAb,UAAaA,EAAUmB,aAAvB,aAAa,EAAiBC,YAA9B,QAAsC,MAaSV,UAAU,YAArD,4CAIA,oBAAIA,UAAU,uBAAd,SAAsCjB,GAASA,EAAM4B,QACrD,kHAAoB5B,IAvBLgB,EAuB0BhB,EAAM6B,aAtB5CC,KAAKC,MAAW,IAAJf,EAAW,KAsB1B,OAEA,gCACE,0DACA,oBAAIC,UAAU,YAAd,SACGjB,GACCA,EAAMgC,OAAOC,KAAI,gBAAGC,EAAH,EAAGA,GAAIC,EAAP,EAAOA,KAAP,OAAkB,+BAAcA,EAAd,MAASD,WAIlD,gCACE,kFACA,4BAAIlC,GAASA,EAAMoC,cAGrB,gCACE,uBACA,cAAC,IAAD,CAAMnB,UAAU,gBAAgBoB,GAAE,kBAAaxC,EAAb,SAAlC,kDAEQ,IACR,uBACA,cAAC,IAAD,CAAMoB,UAAU,gBAAgBoB,GAAE,kBAAaxC,EAAb,YAAlC,wDAGA,uBACA,eAAC,WAAD,CAAUyC,SAAU,cAAC,IAAD,IAApB,UACE,cAAC,IAAD,CAAOC,KAAK,yBAAZ,SACGvC,GAAS,cAACP,EAAD,CAAM+C,MAAOxC,MAEzB,cAAC,IAAD,CAAOuC,KAAK,4BAAZ,SACE,cAAC5C,EAAD","file":"static/js/6.6358264b.chunk.js","sourcesContent":["import {\r\n  useParams,\r\n  Link,\r\n  Route,\r\n  useHistory,\r\n  useLocation,\r\n} from \"react-router-dom\";\r\nimport { useState, useEffect, lazy, Suspense } from \"react\";\r\n\r\nimport Api from \"../../services/FetchAPI\";\r\nimport Loader from \"../loader/loader\";\r\n\r\n// import Cast from \"./Cast\";\r\n// import Reviews from \"./Reviews\";\r\n\r\nconst Cast = lazy(() => import(\"./Cast\"));\r\nconst Reviews = lazy(() => import(\"./Reviews\"));\r\n\r\nexport default function MovieCard() {\r\n  const { moviesId } = useParams();\r\n\r\n  const [movie, setMovie] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [loader, setLoader] = useState(false);\r\n\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  // console.log(\"detalFILM:\", location);\r\n\r\n  useEffect(() => {\r\n    setLoader(true);\r\n    Api.fetchApiOneMovie(moviesId)\r\n      .then(setMovie)\r\n      .catch((error) => setError(error))\r\n      .finally(() => setLoader(false));\r\n  }, [moviesId]);\r\n  const calckRating = (a) => {\r\n    return Math.round((a * 100) / 10);\r\n  };\r\n\r\n  const goBackPage = () => {\r\n    history.push(location?.state?.from ?? \"/\");\r\n  };\r\n  return (\r\n    <div className=\"constainerDetalFilm\">\r\n      {loader && <Loader />}\r\n      <img\r\n        src={movie && `https://image.tmdb.org/t/p/w300${movie.poster_path}`}\r\n        alt=\"\"\r\n        width=\"300\"\r\n        height=\"400\"\r\n        className=\"imagesTitle\"\r\n      ></img>\r\n      <div>\r\n        <button type=\"button\" onClick={goBackPage} className=\"goBackBtn\">\r\n          Назад\r\n        </button>\r\n\r\n        <h1 className=\"nameSactionDetalFilm\">{movie && movie.title}</h1>\r\n        <p>Средняя оценка: {movie && calckRating(movie.vote_average)}%</p>\r\n\r\n        <div>\r\n          <h3>Жанр</h3>\r\n          <ul className=\"ul-genres\">\r\n            {movie &&\r\n              movie.genres.map(({ id, name }) => <li key={id}>{name} </li>)}\r\n          </ul>\r\n        </div>\r\n\r\n        <div>\r\n          <h2>Описание</h2>\r\n          <p>{movie && movie.overview}</p>\r\n        </div>\r\n\r\n        <div>\r\n          <hr />\r\n          <Link className=\"linkDetalFilm\" to={`/movies/${moviesId}/cast`}>\r\n            Актеры\r\n          </Link>{\" \"}\r\n          <br />\r\n          <Link className=\"linkDetalFilm\" to={`/movies/${moviesId}/reviews`}>\r\n            Обзоры (Eng)\r\n          </Link>\r\n          <hr />\r\n          <Suspense fallback={<Loader />}>\r\n            <Route path=\"/movies/:moviesId/cast\">\r\n              {movie && <Cast casts={movie} />}\r\n            </Route>\r\n            <Route path=\"/movies/:moviesId/reviews\">\r\n              <Reviews />\r\n            </Route>\r\n          </Suspense>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}